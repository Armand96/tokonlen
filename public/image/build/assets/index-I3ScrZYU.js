import{r as s,j as e,J as j}from"./remixicon-C_NSdncx.js";import{F as I}from"./FormInput-BoSlL2Nr.js";import{P as D}from"./PageBreadcrumb-DMS3BnLo.js";import{F as O}from"./index-O_58Jj6h.js";import{M as T,T as L}from"./tablePaginate-BAhHNbsP.js";import{L as A}from"./loading-CQIiW4Pw.js";import{S as U}from"./react-select.esm-CUcxdhLx.js";import{G as v,P as $}from"./categories-Dhn_kbpX.js";import{H as B}from"./HelpersFunction-CKAZVPIR.js";import{M as G}from"./ModalPreview-DkZ7Dfpv.js";import"./dialog-YCz78_fl.js";import"./transition-B_aZ0yjS.js";import"./floating-ui.dom-DmIclXt_.js";const ie=()=>{const[p,r]=s.useState(!1),[w,d]=s.useState(!1),[a,i]=s.useState({name:"",image_file:"",parent_id:0,is_active:1,is_show_header:!1}),[o,b]=s.useState(!1),[l,N]=s.useState(null),[m,_]=s.useState(),[C,g]=s.useState(),[S,f]=s.useState(!1),[H,z]=s.useState(null),[J,R]=s.useState([{value:1,label:1},{value:2,label:2},{value:3,label:3},{value:4,label:4},{value:5,label:5}]),u=async(t=1)=>{d(!0);const n=await v("?data_per_page=100000").then(c=>{const h=[];return c.data.forEach(x=>{h.push(x),x.sub_cat&&x.sub_cat.forEach(P=>h.push(P))}),c.data=h,c}),E=await v("?data_per_page=100000").then(c=>B.FormatOptions(c.data,"name","id"));_(E),N(n),d(!1)};s.useEffect(()=>{u()},[]);const k=async()=>{d(!0),o||(delete a.parent_id,delete a.image_thumb,delete a.image,delete a.slug);const t={...a,_method:a.id?"PUT":"POST"};await $(t,a==null?void 0:a.id).then(()=>{r(!1),j.fire("Success",a.id?"Edit Categories berhasil":"Input Categories berhasil","success")}).catch(n=>{r(!1),console.log(n),j.fire("Error",n.name[0],"error")}),await u()},y=t=>{r(!0),i(t),b(!1),g(m==null?void 0:m.filter(n=>n.value==t.parent_id)[0])},F=[{name:"Nama",row:t=>e.jsx("div",{className:`${t.parent_id&&"pl-4 border-l"} ${t.parent_id==null&&"font-bold"}`,children:t.name})},{name:"Status",row:t=>e.jsx("div",{children:t.is_active?"Active":"Non Active"})},{name:"Image",row:t=>e.jsx("button",{className:"btn bg-success text-white",onClick:()=>{f(!0),i(t)},children:"Preview image"})},{name:"Action",row:t=>e.jsx("button",{className:"btn bg-primary text-white",onClick:()=>y(t),children:"Edit"})}],M=t=>{i({...a,image_file:t[0]})};return e.jsxs(e.Fragment,{children:[e.jsx(G,{toggleModal:()=>f(!1),isOpen:S,img:a==null?void 0:a.image}),w&&e.jsx(A,{}),p&&e.jsx(T,{showModal:p,toggleModal:()=>r(!1),placement:"justify-center items-start",children:e.jsxs("div",{className:"m-3 sm:mx-auto flex flex-col bg-white shadow-sm rounded",children:[e.jsxs("div",{className:"flex justify-between items-center py-2.5 px-4 border-b",children:[e.jsx("h3",{className:"text-lg",children:o?"Tambah Data":"Edit Data"}),e.jsx("button",{className:"h-8 w-8",onClick:()=>r(!1),children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto w-[70vw]",children:[e.jsx(I,{name:"name",label:"Name",value:a.name,onChange:t=>i({...a,name:t.target.value}),className:"form-input mb-3"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"mb-2",htmlFor:"choices-text-remove-button",children:"Parent Categories"}),e.jsx(U,{isDisabled:!o,className:"select2 z-5",value:C,options:m,onChange:t=>{g(t),i({...a,parent_id:t.value})}})]}),e.jsxs("div",{className:`mb-3 ${(a==null?void 0:a.parent_id)&&"hidden"}`,children:[e.jsx("h6",{className:"text-sm mb-2",children:"Tampilkan di header"}),e.jsx("input",{type:"checkbox",checked:a.is_show_header===1,onChange:t=>i({...a,is_show_header:t.target.checked?1:0})}),e.jsx("label",{className:"ml-2",children:"Ya"})]}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h4",{className:"card-title mb-1",children:"Image"})}),e.jsx(O,{singleFile:!0,multipleUploads:!1,onFileUpload:M,icon:"ri-upload-cloud-line text-4xl text-gray-300 dark:text-gray-200",text:" klik untuk upload.",onFileDelete:function(t){throw new Error("Function not implemented.")},handleDeletePrevImage:function(t,n){throw new Error("Function not implemented.")},detailData:void 0}),!o&&e.jsxs("div",{className:"mt-5",children:[e.jsx("h6",{className:"text-sm mb-2",children:"Status"}),e.jsx("input",{type:"checkbox",checked:a.is_active===1,onChange:t=>i({...a,is_active:t.target.checked?1:0})}),e.jsx("label",{className:"ml-2",children:"Aktif"})]})]}),e.jsxs("div",{className:"flex justify-end p-4 border-t gap-x-4",children:[e.jsx("button",{className:"btn bg-light text-gray-800",onClick:()=>r(!1),children:"Close"}),e.jsx("button",{className:"btn bg-primary text-white",disabled:!!((!a.image_file||!a.name)&&o),onClick:k,children:"Submit"})]})]})}),e.jsx(D,{title:"Categories",subName:"Backoffice"}),e.jsxs("div",{className:"bg-white p-4 ",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Categories"}),e.jsx("button",{className:"btn bg-primary mb-4 text-white",onClick:()=>{r(!0),b(!0),i({name:"",is_active:1})},children:"Tambah Data"})]}),e.jsxs("p",{className:"mb-2",children:["Total Data : ",l==null?void 0:l.total]}),e.jsx(L,{totalPage:(l==null?void 0:l.last_page)||0,data:l==null?void 0:l.data,columns:F,onPageChange:t=>u(t.selected)})]})]})};export{ie as default};
