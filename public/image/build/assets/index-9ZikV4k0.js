import{E as v,r as n,j as e,J as N}from"./remixicon-C_NSdncx.js";import{F as x}from"./FormInput-BoSlL2Nr.js";import{P as y}from"./PageBreadcrumb-DMS3BnLo.js";import{F as S}from"./index-O_58Jj6h.js";import{M as C,T as F}from"./tablePaginate-BAhHNbsP.js";import{L as _}from"./loading-CQIiW4Pw.js";import"./HelpersFunction-CKAZVPIR.js";import"./dialog-YCz78_fl.js";import"./transition-B_aZ0yjS.js";const u=new v;function k(i,s=""){return u.create(`api/admin/web_setting/${s}`,i)}function E(i,s=""){return u.createWithFile(`api/admin/web_setting_with_upload/${s}`,i)}function I(i=""){const s=`api/admin/web_setting${i}`;return u.get(s).then(r=>r.data)}const B=()=>{const[i,s]=n.useState(!1),[r,m]=n.useState(!1),[t,o]=n.useState({name:"",value:"",is_active:!0,type:"text"}),[c,p]=n.useState(!1),[l,h]=n.useState(null),d=async(a=1)=>{m(!0);const w=await I(`?page=${a}`);h(w),m(!1)};n.useEffect(()=>{d()},[]);const b=async()=>{m(!0);const a={...t,value:t.value,type:t.image_file?"file":"text",_method:t.id?"PUT":"POST"};t.image_file?await E(a,t==null?void 0:t.id):await k(a,t==null?void 0:t.id),await d(),s(!1),N.fire("Success",t.id?"Edit web settings berhasil":"Input web settings berhasil","success")},g=a=>{o({...t,image_file:a[0]})},f=()=>{o({...t,image_file:""})},j=[{name:"Nama",row:a=>e.jsx("div",{children:a.name})},{name:"content",row:a=>e.jsx("div",{className:" whitespace-normal",children:a.value})},{name:"Action",row:a=>e.jsx("button",{className:"btn bg-primary text-white",onClick:()=>{s(!0),o(a),p(!1)},children:"Edit"})}];return e.jsxs(e.Fragment,{children:[r&&e.jsx(_,{}),i&&e.jsx(C,{showModal:i,toggleModal:()=>s(!1),placement:"justify-center items-start",children:e.jsxs("div",{className:"m-3 sm:mx-auto flex flex-col bg-white shadow-sm rounded",children:[e.jsxs("div",{className:"flex justify-between items-center py-2.5 px-4 border-b",children:[e.jsx("h3",{className:"text-lg",children:c?"Tambah Data":"Edit Data"}),e.jsx("button",{className:"h-8 w-8",onClick:()=>s(!1),children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsxs("div",{className:"p-4 max-h-80 overflow-y-auto w-[70vw]",children:[e.jsx(x,{name:"name",label:"Name",value:t.name,onChange:a=>o({...t,name:a.target.value}),className:"form-input mb-3"}),(!c&&(t==null?void 0:t.type)==="text"||c)&&e.jsx(x,{name:"content",label:"Content",value:t.value,onChange:a=>o({...t,value:a.target.value}),className:"form-input mb-3"}),e.jsxs("div",{className:`${!c&&(t==null?void 0:t.type)==="file"||c?"block":"hidden"} mb-2`,children:[e.jsx("label",{className:"mb-2",htmlFor:"choices-text-remove-button",children:"Upload Image"}),e.jsx(S,{multipleUploads:!1,onFileDelete:f,prevData:null,detailData:null,handleDeletePrevImage:()=>null,onFileUpload:g,icon:"ri-upload-cloud-line text-4xl text-gray-300 dark:text-gray-200",text:" klik untuk upload."})]})]}),e.jsxs("div",{className:"flex justify-end p-4 border-t gap-x-4",children:[e.jsx("button",{className:"btn bg-light text-gray-800",onClick:()=>s(!1),children:"Close"}),e.jsx("button",{className:"btn bg-primary text-white",onClick:b,children:"Submit"})]})]})}),e.jsx(y,{title:"web settings",subName:"Backoffice"}),e.jsxs("div",{className:"bg-white p-4 ",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h3",{className:"text-2xl font-bold",children:"web settings"})}),e.jsxs("p",{className:"mb-2",children:["Total Data : ",l==null?void 0:l.total]}),e.jsx(F,{totalPage:(l==null?void 0:l.last_page)||0,data:l==null?void 0:l.data,columns:j,onPageChange:a=>d(a.selected)})]})]})};export{B as default};
