import{E as v,r as n,j as e,J as f}from"./remixicon-C_NSdncx.js";import{F as y}from"./FormInput-BoSlL2Nr.js";import{P as k}from"./PageBreadcrumb-DMS3BnLo.js";import{F as C}from"./index-O_58Jj6h.js";import{L as S}from"./loading-CQIiW4Pw.js";import{M as _,T as B}from"./tablePaginate-BAhHNbsP.js";import{M as F}from"./ModalPreview-DkZ7Dfpv.js";import"./HelpersFunction-CKAZVPIR.js";import"./dialog-YCz78_fl.js";import"./transition-B_aZ0yjS.js";const p=new v;function I(l,s=""){return p.createWithFile(`api/admin/banner/${s}`,l)}function M(l=""){const s=`api/admin/banner${l}`;return p.get(s).then(o=>o.data)}const R=()=>{const[l,s]=n.useState(!1),[o,m]=n.useState(!1),[t,r]=n.useState({name:"",image_file:"",is_active:1,caption:""}),[d,u]=n.useState(!1),[i,g]=n.useState(null),[b,h]=n.useState(!1),x=async(a=1)=>{m(!0);const c=await M(`?page=${a}`);g(c),m(!1)};n.useEffect(()=>{x()},[]);const j=async()=>{m(!0),d||(delete t.image,delete t.image_thumb);const a={...t,_method:t.id?"PUT":"POST"};await I(a,t==null?void 0:t.id).then(()=>{s(!1),f.fire("Success",t.id?"Update Banner Berhasil":"Input Banner Berhasil","success")}).catch(c=>{s(!1),console.log(c),f.fire("Error",c.name[0],"error")}),await x(),s(!1)},w=[{name:"Nama Link",row:a=>e.jsx("div",{children:a.name})},{name:"Image",row:a=>e.jsx("button",{className:"btn bg-success text-white",onClick:()=>{h(!0),r(a)},children:"Preview image"})},{name:"Status",row:a=>e.jsx("div",{children:a.is_active?"Active":"Non Active"})},{name:"Action",row:a=>e.jsx("button",{className:"btn bg-primary text-white",onClick:()=>{s(!0),r(a),u(!1)},children:"Edit"})}],N=a=>{r({...t,image_file:a[0]})};return e.jsxs(e.Fragment,{children:[o&&e.jsx(S,{}),e.jsx(F,{toggleModal:()=>h(!1),isOpen:b,img:t==null?void 0:t.image}),l&&e.jsx(_,{showModal:l,toggleModal:()=>s(!1),placement:"justify-center items-start",children:e.jsxs("div",{className:"m-3 sm:mx-auto flex flex-col bg-white shadow-sm rounded",children:[e.jsxs("div",{className:"flex justify-between items-center py-2.5 px-4 border-b",children:[e.jsx("h3",{className:"text-lg",children:d?"Tambah Data":"Edit Data"}),e.jsx("button",{className:"h-8 w-8",onClick:()=>s(!1),children:e.jsx("i",{className:"ri-close-line text-2xl"})})]}),e.jsxs("div",{className:"p-4 max-h-screen overflow-y-auto w-[70vw]",children:[e.jsx(y,{name:"name",label:"Caption",value:t.name,onChange:a=>r({...t,name:a.target.value}),className:"form-input mb-3"}),e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h4",{className:"card-title mb-1",children:"Image"})}),e.jsx(C,{singleFile:!0,multipleUploads:!1,onFileUpload:N,icon:"ri-upload-cloud-line text-4xl text-gray-300 dark:text-gray-200",text:" klik untuk upload."}),!d&&e.jsxs("div",{className:"mt-5",children:[e.jsx("h6",{className:"text-sm mb-2",children:"Status"}),e.jsx("input",{type:"checkbox",checked:t.is_active===1,onChange:a=>r({...t,is_active:a.target.checked?1:0})}),e.jsx("label",{className:"ml-2",children:"Aktif"})]})]}),e.jsxs("div",{className:"flex justify-end p-4 border-t gap-x-4",children:[e.jsx("button",{className:"btn bg-light text-gray-800",onClick:()=>s(!1),children:"Close"}),e.jsx("button",{className:"btn bg-primary text-white",onClick:j,children:"Submit"})]})]})}),e.jsx(k,{title:"Banners",subName:"Backoffice"}),e.jsxs("div",{className:"bg-white p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Banners"}),e.jsx("button",{className:"btn bg-primary mb-4 text-white",onClick:()=>{s(!0),u(!0),r({name:"",image_file:"",is_active:1})},children:"Tambah Data"})]}),e.jsxs("p",{className:"mb-2",children:["Total Data : ",i==null?void 0:i.total]}),e.jsx(B,{totalPage:(i==null?void 0:i.last_page)||0,data:i==null?void 0:i.data,columns:w,onPageChange:a=>x((a==null?void 0:a.current_page)+1)})]})]})};export{R as default};
